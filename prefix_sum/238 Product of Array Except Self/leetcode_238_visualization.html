<!DOCTYPE html>
<html lang="zh-TW">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>LeetCode 238 - å…©æ¬¡å¾ªç’°è©³è§£</title>
        <style>
            body {
                font-family: 'Arial', sans-serif;
                margin: 0;
                padding: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                color: #333;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: rgba(255, 255, 255, 0.95);
                border-radius: 20px;
                padding: 30px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            }

            h1 {
                text-align: center;
                color: #4a5568;
                margin-bottom: 30px;
                font-size: 2.5em;
            }

            .concept-box {
                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                padding: 25px;
                border-radius: 15px;
                margin-bottom: 30px;
                color: white;
                font-size: 1.2em;
                text-align: center;
            }

            .step-container {
                margin-bottom: 40px;
                background: white;
                border-radius: 15px;
                padding: 25px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
                border-left: 5px solid #4299e1;
            }

            .step-title {
                font-size: 1.8em;
                font-weight: bold;
                color: #2d3748;
                margin-bottom: 20px;
                text-align: center;
            }

            .visual-array {
                display: flex;
                justify-content: center;
                align-items: center;
                margin: 30px 0;
                flex-wrap: wrap;
            }

            .array-item {
                background: linear-gradient(135deg, #81ecec, #74b9ff);
                color: white;
                padding: 20px;
                margin: 10px;
                border-radius: 12px;
                font-size: 1.5em;
                font-weight: bold;
                min-width: 80px;
                text-align: center;
                position: relative;
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            }

            .index-tag {
                position: absolute;
                top: -12px;
                left: 50%;
                transform: translateX(-50%);
                background: #2d3748;
                color: white;
                padding: 4px 10px;
                border-radius: 8px;
                font-size: 0.7em;
            }

            .highlight {
                background: linear-gradient(
                    135deg,
                    #ff6b6b,
                    #ee5a24
                ) !important;
                transform: scale(1.1);
                animation: glow 1.5s infinite;
            }

            .left-product {
                background: linear-gradient(
                    135deg,
                    #a8e6cf,
                    #7fcdcd
                ) !important;
            }

            .right-product {
                background: linear-gradient(
                    135deg,
                    #ffeaa7,
                    #fdcb6e
                ) !important;
            }

            @keyframes glow {
                0%,
                100% {
                    box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3);
                }
                50% {
                    box-shadow: 0 8px 30px rgba(255, 107, 107, 0.6);
                }
            }

            .explanation {
                background: #f8f9fa;
                padding: 25px;
                border-radius: 12px;
                margin: 20px 0;
                border-left: 4px solid #28a745;
                font-size: 1.1em;
                line-height: 1.8;
            }

            .formula {
                background: linear-gradient(135deg, #ffecd2, #fcb69f);
                padding: 20px;
                border-radius: 12px;
                margin: 20px 0;
                text-align: center;
                font-size: 1.3em;
                font-weight: bold;
                color: #2d3748;
            }

            .demo-section {
                background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
                padding: 30px;
                border-radius: 15px;
                margin: 25px 0;
            }

            .controls {
                text-align: center;
                margin: 20px 0;
            }

            button {
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                border: none;
                padding: 15px 30px;
                border-radius: 25px;
                font-size: 1.1em;
                cursor: pointer;
                margin: 10px;
                font-weight: bold;
                transition: all 0.3s ease;
            }

            button:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
            }

            .phase-indicator {
                text-align: center;
                margin: 20px 0;
                font-size: 1.3em;
                font-weight: bold;
                padding: 15px;
                border-radius: 10px;
            }

            .phase-1 {
                background: linear-gradient(135deg, #a8e6cf, #7fcdcd);
                color: white;
            }

            .phase-2 {
                background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
                color: #2d3748;
            }

            .calculation-detail {
                background: rgba(255, 255, 255, 0.9);
                padding: 20px;
                border-radius: 10px;
                margin: 15px 0;
                border: 2px solid #4299e1;
                font-size: 1.1em;
            }

            .side-by-side {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                margin: 20px 0;
                gap: 20px;
            }

            .side-box {
                flex: 1;
                background: white;
                padding: 20px;
                border-radius: 12px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            }

            .code-simple {
                background: #2d3748;
                color: #e2e8f0;
                padding: 20px;
                border-radius: 10px;
                font-family: 'Courier New', monospace;
                font-size: 1.1em;
                line-height: 1.6;
                margin: 15px 0;
            }

            .key-insight {
                background: linear-gradient(135deg, #ff9a9e, #fecfef);
                padding: 25px;
                border-radius: 12px;
                margin: 20px 0;
                text-align: center;
                font-size: 1.2em;
                font-weight: bold;
                color: #2d3748;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>ğŸ”„ å…©æ¬¡å¾ªç’°çš„æ ¸å¿ƒæ€è·¯è©³è§£</h1>

            <div class="concept-box">
                <h3>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h3>
                <p>æ¯å€‹ä½ç½®çš„ç­”æ¡ˆ = å·¦é‚Šæ‰€æœ‰æ•¸çš„ä¹˜ç© Ã— å³é‚Šæ‰€æœ‰æ•¸çš„ä¹˜ç©</p>
                <p>ç”¨å…©æ¬¡å¾ªç’°åˆ†åˆ¥è¨ˆç®—é€™å…©éƒ¨åˆ†ï¼</p>
            </div>

            <div class="step-container">
                <div class="step-title">ğŸ¯ ç‚ºä»€éº¼è¦å…©æ¬¡å¾ªç’°ï¼Ÿ</div>

                <div class="key-insight">
                    ä¸€æ¬¡å¾ªç’°è§£æ±ºä¸äº†å•é¡Œï¼<br />
                    å› ç‚ºæˆ‘å€‘éœ€è¦ã€Œæœªä¾†çš„ä¿¡æ¯ã€ï¼ˆå³é‚Šçš„æ•¸ï¼‰
                </div>

                <div class="side-by-side">
                    <div class="side-box">
                        <h4 style="color: #28a745">âœ… ç¬¬ä¸€æ¬¡å¾ªç’°èƒ½åšä»€éº¼ï¼Ÿ</h4>
                        <p>
                            å¾å·¦åˆ°å³éæ­·æ™‚ï¼Œæˆ‘å€‘çŸ¥é“æ¯å€‹ä½ç½®<strong>å·¦é‚Š</strong>æœ‰ä»€éº¼æ•¸å­—
                        </p>
                        <p>æ‰€ä»¥å¯ä»¥è¨ˆç®—ã€Œå·¦é‚Šä¹˜ç©ã€</p>
                    </div>
                    <div class="side-box">
                        <h4 style="color: #dc3545">
                            âŒ ç¬¬ä¸€æ¬¡å¾ªç’°åšä¸åˆ°ä»€éº¼ï¼Ÿ
                        </h4>
                        <p>
                            å¾å·¦åˆ°å³éæ­·æ™‚ï¼Œæˆ‘å€‘ä¸çŸ¥é“æ¯å€‹ä½ç½®<strong>å³é‚Š</strong>æœ‰ä»€éº¼æ•¸å­—
                        </p>
                        <p>æ‰€ä»¥ç„¡æ³•è¨ˆç®—ã€Œå³é‚Šä¹˜ç©ã€</p>
                    </div>
                </div>

                <div class="formula">
                    è§£æ±ºæ–¹æ¡ˆï¼šç¬¬äºŒæ¬¡å¾ªç’°å¾å³å¾€å·¦ï¼Œå°ˆé–€è™•ç†ã€Œå³é‚Šä¹˜ç©ã€ï¼
                </div>
            </div>

            <div class="step-container">
                <div class="step-title">ğŸ” é€æ­¥åˆ†è§£ç†è§£</div>

                <div class="demo-section">
                    <h4 style="text-align: center">
                        ç¤ºä¾‹ï¼šnums = [2, 3, 4, 5]
                    </h4>

                    <div class="controls">
                        <button onclick="showPhase(1)">ç¬¬ä¸€æ¬¡å¾ªç’°</button>
                        <button onclick="showPhase(2)">ç¬¬äºŒæ¬¡å¾ªç’°</button>
                        <button onclick="showPhase(3)">å®Œæ•´éç¨‹</button>
                        <button onclick="reset()">é‡ç½®</button>
                    </div>

                    <div id="demo-area">
                        <div class="visual-array">
                            <div class="array-item">
                                <div class="index-tag">0</div>
                                2
                            </div>
                            <div class="array-item">
                                <div class="index-tag">1</div>
                                3
                            </div>
                            <div class="array-item">
                                <div class="index-tag">2</div>
                                4
                            </div>
                            <div class="array-item">
                                <div class="index-tag">3</div>
                                5
                            </div>
                        </div>
                        <p style="text-align: center; font-size: 1.1em">
                            é»æ“ŠæŒ‰éˆ•é–‹å§‹ç†è§£å…©æ¬¡å¾ªç’°çš„ä½œç”¨
                        </p>
                    </div>
                </div>
            </div>

            <div class="step-container">
                <div class="step-title">ğŸ“ ä»£ç¢¼å°ç…§ç†è§£</div>

                <div class="explanation">
                    <h4>ç¬¬ä¸€æ¬¡å¾ªç’°ï¼ˆè¨ˆç®—å·¦é‚Šä¹˜ç©ï¼‰ï¼š</h4>
                    <div class="code-simple">
                        for i in range(1, n): result[i] = result[i-1] *
                        nums[i-1]
                    </div>
                    <p>
                        <strong>è§£è®€ï¼š</strong>result[i] å­˜çš„æ˜¯ nums[0] åˆ°
                        nums[i-1] çš„ä¹˜ç©
                    </p>
                </div>

                <div class="explanation">
                    <h4>ç¬¬äºŒæ¬¡å¾ªç’°ï¼ˆåˆä½µå³é‚Šä¹˜ç©ï¼‰ï¼š</h4>
                    <div class="code-simple">
                        right = 1 for i in range(n-1, -1, -1): result[i] *=
                        right # å·¦é‚Šä¹˜ç© Ã— å³é‚Šä¹˜ç© right *= nums[i] #
                        æ›´æ–°rightç‚ºä¸‹æ¬¡æº–å‚™
                    </div>
                    <p>
                        <strong>è§£è®€ï¼š</strong>right
                        è®Šé‡è¿½è¹¤å¾ç•¶å‰ä½ç½®å¾€å³æ‰€æœ‰æ•¸çš„ä¹˜ç©
                    </p>
                </div>
            </div>

            <div class="step-container">
                <div class="step-title">ğŸ§  è¨˜æ†¶æŠ€å·§</div>

                <div class="key-insight">
                    æƒ³è±¡æˆã€Œæ™‚å…‰æ©Ÿã€å•é¡Œï¼š<br /><br />
                    ğŸ• ç¬¬ä¸€æ¬¡å¾ªç’°ï¼šæˆ‘å€‘æœ‰ã€Œéå»çš„è¨˜æ†¶ã€ï¼ˆå·¦é‚Šçš„æ•¸ï¼‰<br />
                    ğŸ•‘ ç¬¬äºŒæ¬¡å¾ªç’°ï¼šæˆ‘å€‘æ”¶é›†ã€Œæœªä¾†çš„ä¿¡æ¯ã€ï¼ˆå³é‚Šçš„æ•¸ï¼‰<br /><br />
                    å…©å€‹ä¿¡æ¯åˆä½µ = å®Œæ•´ç­”æ¡ˆï¼
                </div>

                <div class="formula">
                    ç¬¬ä¸€æ¬¡ï¼šæ”¶é›†éå» â†’ result[i] = å·¦é‚Šä¹˜ç©<br />
                    ç¬¬äºŒæ¬¡ï¼šçµåˆæœªä¾† â†’ result[i] = å·¦é‚Šä¹˜ç© Ã— å³é‚Šä¹˜ç©
                </div>
            </div>
        </div>

        <script>
            function reset() {
                document.getElementById('demo-area').innerHTML = `
                <div class="visual-array">
                    <div class="array-item">
                        <div class="index-tag">0</div>
                        2
                    </div>
                    <div class="array-item">
                        <div class="index-tag">1</div>
                        3
                    </div>
                    <div class="array-item">
                        <div class="index-tag">2</div>
                        4
                    </div>
                    <div class="array-item">
                        <div class="index-tag">3</div>
                        5
                    </div>
                </div>
                <p style="text-align: center; font-size: 1.1em;">é»æ“ŠæŒ‰éˆ•é–‹å§‹ç†è§£å…©æ¬¡å¾ªç’°çš„ä½œç”¨</p>
            `;
            }

            function showPhase(phase) {
                const demoArea = document.getElementById('demo-area');

                if (phase === 1) {
                    demoArea.innerHTML = `
                    <div class="phase-indicator phase-1">
                        ğŸ”„ ç¬¬ä¸€æ¬¡å¾ªç’°ï¼šå¾å·¦åˆ°å³ï¼Œè¨ˆç®—æ¯å€‹ä½ç½®å·¦é‚Šçš„ä¹˜ç©
                    </div>
                    
                    <h4>åŸæ•¸çµ„ nums:</h4>
                    <div class="visual-array">
                        <div class="array-item">
                            <div class="index-tag">0</div>
                            2
                        </div>
                        <div class="array-item">
                            <div class="index-tag">1</div>
                            3
                        </div>
                        <div class="array-item">
                            <div class="index-tag">2</div>
                            4
                        </div>
                        <div class="array-item">
                            <div class="index-tag">3</div>
                            5
                        </div>
                    </div>
                    
                    <h4>ç¬¬ä¸€æ¬¡å¾ªç’°å¾Œçš„ result:</h4>
                    <div class="visual-array">
                        <div class="array-item left-product">
                            <div class="index-tag">0</div>
                            1
                        </div>
                        <div class="array-item left-product">
                            <div class="index-tag">1</div>
                            2
                        </div>
                        <div class="array-item left-product">
                            <div class="index-tag">2</div>
                            6
                        </div>
                        <div class="array-item left-product">
                            <div class="index-tag">3</div>
                            24
                        </div>
                    </div>
                    
                    <div class="calculation-detail">
                        <h4>è¨ˆç®—éç¨‹ï¼š</h4>
                        <p><strong>result[0] = 1</strong> ï¼ˆå·¦é‚Šæ²’æœ‰æ•¸å­—ï¼‰</p>
                        <p><strong>result[1] = 2</strong> ï¼ˆå·¦é‚Šåªæœ‰nums[0]=2ï¼‰</p>
                        <p><strong>result[2] = 2Ã—3 = 6</strong> ï¼ˆå·¦é‚Šæœ‰nums[0],nums[1]ï¼‰</p>
                        <p><strong>result[3] = 2Ã—3Ã—4 = 24</strong> ï¼ˆå·¦é‚Šæœ‰nums[0],nums[1],nums[2]ï¼‰</p>
                    </div>
                    
                    <div class="key-insight">
                        ç¾åœ¨ result[i] å­˜çš„æ˜¯ä½ç½® i å·¦é‚Šæ‰€æœ‰æ•¸çš„ä¹˜ç©ï¼<br>
                        ä½†æˆ‘å€‘é‚„éœ€è¦å³é‚Šçš„ä¹˜ç©...
                    </div>
                `;
                } else if (phase === 2) {
                    demoArea.innerHTML = `
                    <div class="phase-indicator phase-2">
                        ğŸ”„ ç¬¬äºŒæ¬¡å¾ªç’°ï¼šå¾å³åˆ°å·¦ï¼Œä¹˜ä¸Šå³é‚Šçš„ä¹˜ç©
                    </div>
                    
                    <h4>ç¬¬ä¸€æ¬¡å¾ªç’°çš„çµæœï¼ˆå·¦é‚Šä¹˜ç©ï¼‰:</h4>
                    <div class="visual-array">
                        <div class="array-item left-product">
                            <div class="index-tag">0</div>
                            1
                        </div>
                        <div class="array-item left-product">
                            <div class="index-tag">1</div>
                            2
                        </div>
                        <div class="array-item left-product">
                            <div class="index-tag">2</div>
                            6
                        </div>
                        <div class="array-item left-product">
                            <div class="index-tag">3</div>
                            24
                        </div>
                    </div>
                    
                    <h4>ç¬¬äºŒæ¬¡å¾ªç’°å¾Œçš„æœ€çµ‚çµæœ:</h4>
                    <div class="visual-array">
                        <div class="array-item right-product">
                            <div class="index-tag">0</div>
                            60
                        </div>
                        <div class="array-item right-product">
                            <div class="index-tag">1</div>
                            40
                        </div>
                        <div class="array-item right-product">
                            <div class="index-tag">2</div>
                            30
                        </div>
                        <div class="array-item right-product">
                            <div class="index-tag">3</div>
                            24
                        </div>
                    </div>
                    
                    <div class="calculation-detail">
                        <h4>ç¬¬äºŒæ¬¡å¾ªç’°éç¨‹ï¼ˆå¾å³å¾€å·¦ï¼‰:</h4>
                        <p><strong>i=3:</strong> result[3] = 24 Ã— 1 = 24ï¼Œrightè®Šæˆ5</p>
                        <p><strong>i=2:</strong> result[2] = 6 Ã— 5 = 30ï¼Œrightè®Šæˆ5Ã—4=20</p>
                        <p><strong>i=1:</strong> result[1] = 2 Ã— 20 = 40ï¼Œrightè®Šæˆ20Ã—3=60</p>
                        <p><strong>i=0:</strong> result[0] = 1 Ã— 60 = 60</p>
                    </div>
                    
                    <div class="key-insight">
                        æ¯æ­¥éƒ½æ˜¯ï¼šå·¦é‚Šä¹˜ç© Ã— å³é‚Šä¹˜ç© = æœ€çµ‚ç­”æ¡ˆï¼
                    </div>
                `;
                } else if (phase === 3) {
                    demoArea.innerHTML = `
                    <div class="phase-indicator">
                        ğŸ¯ å®Œæ•´éç¨‹ç¸½è¦½
                    </div>
                    
                    <div class="side-by-side">
                        <div class="side-box">
                            <h4 style="color: #28a745;">ç¬¬ä¸€æ¬¡å¾ªç’°çš„ä½¿å‘½</h4>
                            <p>éæ­·æ–¹å‘ï¼šâ†’</p>
                            <p>ç›®æ¨™ï¼šè¨ˆç®—æ¯å€‹ä½ç½®å·¦é‚Šçš„ä¹˜ç©</p>
                            <p>çµæœï¼š[1, 2, 6, 24]</p>
                        </div>
                        <div class="side-box">
                            <h4 style="color: #fd79a8;">ç¬¬äºŒæ¬¡å¾ªç’°çš„ä½¿å‘½</h4>
                            <p>éæ­·æ–¹å‘ï¼šâ†</p>
                            <p>ç›®æ¨™ï¼šä¹˜ä¸Šæ¯å€‹ä½ç½®å³é‚Šçš„ä¹˜ç©</p>
                            <p>çµæœï¼š[60, 40, 30, 24]</p>
                        </div>
                    </div>
                    
                    <div class="formula">
                        é©—è­‰ç­”æ¡ˆï¼š<br>
                        nums[0]é™¤å¤–çš„ä¹˜ç© = 3Ã—4Ã—5 = 60 âœ“<br>
                        nums[1]é™¤å¤–çš„ä¹˜ç© = 2Ã—4Ã—5 = 40 âœ“<br>
                        nums[2]é™¤å¤–çš„ä¹˜ç© = 2Ã—3Ã—5 = 30 âœ“<br>
                        nums[3]é™¤å¤–çš„ä¹˜ç© = 2Ã—3Ã—4 = 24 âœ“
                    </div>
                    
                    <div class="key-insight">
                        ğŸ§  è¨˜ä½ï¼šå…©æ¬¡å¾ªç’°ä¸æ˜¯é‡è¤‡å·¥ä½œï¼Œè€Œæ˜¯åˆ†å·¥åˆä½œï¼<br>
                        ç¬¬ä¸€æ¬¡æ”¶é›†ã€Œéå»ã€ï¼Œç¬¬äºŒæ¬¡æ•´åˆã€Œæœªä¾†ã€
                    </div>
                `;
                }
            }
        </script>
    </body>
</html>
